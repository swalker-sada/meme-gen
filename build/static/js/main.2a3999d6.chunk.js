(this["webpackJsonpmeme-generator"]=this["webpackJsonpmeme-generator"]||[]).push([[0],{116:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAB3UlEQVRoge2YPUjDQBiG37RJaE0aK0UHN0fFwVFBwV0oiIM4uYngIoKCglB0EQXRQRRdHF2UqhQXB6WRUgdRrF11VgpWW/9aE4dSIUO05C4W9Xumy/2933tfLtwFIAiCIIhfjFAumF0wKxmQ2cu6Fw2AULi2on5CvBS7x9VofgAyUG3IQLVx1YCcjEGO77gpAdGtiYWHDJSVUQjGO+5bO2HUNbiiwz0DWqQPUkqHujYGz/1tycjGOKSUDi3Sx1uOfwa8N1fQpnosdbIehaxHYYQaecvxz4CpBu3bFPs2p3A3YKh19m0B+zancDOgTYchnx58nQE1CDGdQGC2n5csvz0gXeqQLo4BUbLvc3YIORkDPF5esmwGAvODkPWotbJYsO0vFF5LBeP989T51tmLx4lNxzEwvUK54UUYQeffd1MLIT+0wBICmwFTCyE/suR4fGkB6llCYDMgphPwxdYdj/fvr0I6P2IJ4fcf5pg2cbGlAw8zuxDTCdRszVW8msXmdjwNTKLQ1s0iD4DznbjS+yyPOcp3Yr5nIUmG6VNgKLUw/SrE6xQAoNjUCuE5B08+C+Elz1WSq4HM9p3lubya2eUTnjIW/vcm/g63/yEBfyADZKDakAGCIAiCIBj4APxje+OTYC0+AAAAAElFTkSuQmCC"},118:function(e,t,n){e.exports=n(224)},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},130:function(e,t){},132:function(e,t){},142:function(e,t){},144:function(e,t){},171:function(e,t){},172:function(e,t){},177:function(e,t){},179:function(e,t){},186:function(e,t){},205:function(e,t){},222:function(e,t,n){"use strict";n.r(t),function(e){var t,a=n(10),o=n.n(a),r=n(25),s=n(114),i="https://".concat("31ebaea1-ddbd-4686-9585-ecbddeaf83d2","-").concat("us-east1",".apps.astra.datastax.com/api/rest/v1");e.exports=function(){var e=Object(r.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",t);case 2:return e.prev=2,console.log(i),e.next=6,s("".concat(i,"/auth"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:"memegen",password:"memegen2021"})});case 6:return n=e.sent,e.next=9,n.json();case 9:return t=e.sent,e.abrupt("return",t);case 13:throw e.prev=13,e.t0=e.catch(2),new Error("Could not authenticate with the Astra API");case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}()}.call(this,n(223)(e))},224:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(115),s=n.n(r),i=(n(123),n(12)),c=n(13),m=n(15),l=n(14),u=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).setSpans=function(){var e=a.imageRef.current.clientHeight,t=Math.ceil(e/10+2);a.setState({spans:t})},a.state={spans:0},a.imageRef=o.a.createRef(),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.imageRef.current.addEventListener("load",this.setSpans)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:{gridRowEnd:"span ".concat(this.state.spans)}},o.a.createElement("img",{ref:this.imageRef,src:this.props.image.url,alt:this.props.image.name,id:this.props.image.id,onClick:function(t){return e.props.handleclick(t)}}))}}]),n}(o.a.Component),d=(n(124),n(116)),g=n.n(d),p=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{className:"h1"},"MEME GENERATOR"),o.a.createElement("img",{className:"icon",src:g.a,alt:"Logo",style:{position:"absolute",top:10,right:15,width:"7%",height:100}}),o.a.createElement("div",null,o.a.createElement("button",{className:"btn-gallery",onClick:function(){return e.props.handleRandom()}},"Gimme a Random Meme")),o.a.createElement("div",{className:"image-list"},this.props.images.map((function(t){return o.a.createElement(u,{key:t.id,image:t,handleclick:e.props.handleclick})}))))}}]),n}(a.Component),f=n(26),h=n(37),v=(n(125),n(60)),b={toptext:"",bottomtext:"",isTopDragging:!1,isBottomDragging:!1,topX:"50%",topY:"10%",bottomX:"50%",bottomY:"90%"},x=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).getStateObj=function(t,n){var a=e.imageRef.getBoundingClientRect(),o=t.clientX-a.left,r=t.clientY-a.top,s={};return"bottom"===n?s={isBottomDragging:!0,isTopDragging:!1,bottomX:"".concat(o,"px"),bottomY:"".concat(r,"px")}:"top"===n&&(s={isTopDragging:!0,isBottomDragging:!1,topX:"".concat(o,"px"),topY:"".concat(r,"px")}),s},e.changeText=function(t){e.setState(Object(h.a)({},t.currentTarget.id,t.currentTarget.value));var n=t.currentTarget.name;e.resizeText(n)},e.handleMouseDown=function(t,n){var a=e.getStateObj(t,n);document.addEventListener("mousemove",(function(t){return e.handleMouseMove(t,n)})),e.setState(Object(f.a)({},a))},e.handleMouseMove=function(t,n){if(e.state.isTopDragging||e.state.isBottomDragging){var a={};("bottom"===n&&e.state.isBottomDragging||"top"===n&&e.state.isTopDragging)&&(a=e.getStateObj(t,n)),e.setState(Object(f.a)({},a))}},e.handleMouseUp=function(t){document.removeEventListener("mousemove",e.handleMouseMove),e.setState({isTopDragging:!1,isBottomDragging:!1})},e.saveMeme=function(){var e=document.getElementById("memename").value;e.length>0?v.saveSvgAsPng(document.getElementById("svg_ref"),"".concat(e,".png")):v.saveSvgAsPng(document.getElementById("svg_ref"),"meme.png")},e.resetBoxes=function(){e.setState({toptext:"",bottomtext:"",topX:"50%",topY:"10%",bottomX:"50%",bottomY:"90%"}),document.getElementById("toptext").value="",document.getElementById("bottomtext").value="",document.getElementById("memename").value="",document.getElementById("tiptoptext").style.fontSize="50px",document.getElementById("bittybottomtext").style.fontSize="50px"},e.resizeText=function(t){var n=document.getElementById(t).textLength.baseVal.value,a=e.props.meme.width;n>a&&(document.getElementById(t).style.fontSize="".concat(a/n*40,"px"))},e.state=Object(f.a)({},b),e}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.props.meme,n=500/(t.width/t.height),a={fontFamily:"Impact",fontSize:"50px",textTransform:"uppercase",fill:"#FFF",stroke:"#000",userSelect:"none"};return o.a.createElement("div",null,o.a.createElement("div",{className:"h1",onClick:function(){return e.props.toggleSelected()}},"MEME GENERATOR"),o.a.createElement("div",{className:"main-content"},o.a.createElement("div",{className:"meme-gen-modal"},o.a.createElement("svg",{id:"svg_ref",ref:function(t){e.svgRef=t},height:n,width:500},o.a.createElement("image",{ref:function(t){e.imageRef=t},xlinkHref:this.props.meme.url,height:n,width:500}),o.a.createElement("text",{id:"tiptoptext",style:Object(f.a)(Object(f.a)({},a),{},{zIndex:this.state.isTopDragging?4:1}),x:this.state.topX,y:this.state.topY,dominantBaseline:"middle",textAnchor:"middle",onMouseDown:function(t){return e.handleMouseDown(t,"top")},onMouseUp:function(t){return e.handleMouseUp(t,"top")}},this.state.toptext),o.a.createElement("text",{id:"bittybottomtext",style:a,dominantBaseline:"middle",textAnchor:"middle",x:this.state.bottomX,y:this.state.bottomY,onMouseDown:function(t){return e.handleMouseDown(t,"bottom")},onMouseUp:function(t){return e.handleMouseUp(t,"bottom")}},this.state.bottomtext)),o.a.createElement("div",{className:"meme-form"},o.a.createElement("input",{className:"form-control",type:"text",name:"tiptoptext",id:"toptext",placeholder:"Add text to the top",onChange:this.changeText}),o.a.createElement("input",{className:"form-control",type:"text",name:"bittybottomtext",id:"bottomtext",placeholder:"Add text to the bottom",onChange:this.changeText}),o.a.createElement("input",{className:"form-control",type:"text",id:"memename",placeholder:"Save meme as..."})),o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{onClick:this.saveMeme,className:"btn btn-primary"},"Download Meme :D"),o.a.createElement("button",{onClick:this.resetBoxes,className:"btn btn-primary"},"Reset"),o.a.createElement("button",{onClick:function(){return e.props.toggleSelected()},className:"btn btn-primary"},"Back to Gallery")))))}}]),n}(a.Component),E=n(117),y=n.n(E),A=function(){return y.a.v1()},w=function(e,t){if("undefined"!==typeof window){if(t)return localStorage.setItem(e,JSON.stringify(t));var n=localStorage.getItem(e);return n&&JSON.parse(n)||null}return null},S=n(10),O=n.n(S),j=n(25),B=function(){var e=Object(j.a)(O.a.mark((function e(t){var a,o,r,s,i,c,m,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(114),o=n(222),r="https://".concat("31ebaea1-ddbd-4686-9585-ecbddeaf83d2","-").concat("us-east1",".apps.astra.datastax.com/api/rest/v1"),s="memegen",i="memes",e.next=7,o();case 7:return c=e.sent,m=c.authToken,e.prev=9,e.next=12,a("".concat(r,"/keyspaces/").concat(s,"/tables/").concat(i,"/rows"),{headers:{"x-cassandra-token":m}});case 12:return l=e.sent,e.t0=JSON,e.next=16,l.json();case 16:return e.t1=e.sent,e.abrupt("return",e.t0.stringify.call(e.t0,e.t1));case 20:return e.prev=20,e.t2=e.catch(9),e.abrupt("return",JSON.stringify(e.t2));case 23:case"end":return e.stop()}}),e,null,[[9,20]])})));return function(t){return e.apply(this,arguments)}}(),I=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={images:[],memes:[],selected:null,selectedImg:[]},e.handleImgClick=function(t){e.setState({selectedImg:e.state.images.find((function(e){return e.id===t.target.id}))}),e.toggleSelected()},e.chooseRandom=function(){e.setState({selected:!0,selectedImg:e.state.images[Math.floor(Math.random()*e.state.images.length)]})},e.toggleComponent=function(){return e.state.selected?o.a.createElement(x,{meme:e.state.selectedImg,toggleSelected:e.toggleSelected}):o.a.createElement(p,{handleRandom:e.chooseRandom,images:e.state.images,handleclick:e.handleImgClick})},e.toggleSelected=function(){e.setState({selected:!e.state.selected})},e}return Object(c.a)(n,[{key:"getSessionId",value:function(){var e=new URLSearchParams(window.location.search);if(e.get("session-id"))return e.get("session-id");if(w("session-id"))return w("session-id");var t=A();return w("session-id",t),t}},{key:"render",value:function(){return o.a.createElement("div",null,this.toggleComponent())}},{key:"componentDidMount",value:function(){var e=this.getSessionId(),t=B(e);console.log(t),this.setState({images:t.rows})}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[118,1,2]]]);
//# sourceMappingURL=main.2a3999d6.chunk.js.map