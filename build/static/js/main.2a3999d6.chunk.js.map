{"version":3,"sources":["images/canada.png","utils/getOrCreateAuthToken.js","Image.js","Gallery.js","TempGen.js","utils/utils.js","utils/api.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","cachedToken","fetch","require","ENDPOINT","process","a","console","log","method","headers","body","JSON","stringify","username","password","response","json","Error","Image","props","setSpans","height","imageRef","current","clientHeight","spans","Math","ceil","setState","state","React","createRef","this","addEventListener","style","gridRowEnd","ref","src","image","url","alt","name","id","onClick","e","handleclick","Component","Gallery","className","logo","position","top","right","width","handleRandom","images","map","key","initialState","toptext","bottomtext","isTopDragging","isBottomDragging","topX","topY","bottomX","bottomY","TempGen","getStateObj","type","rect","getBoundingClientRect","xOffset","clientX","left","yOffset","clientY","stateObj","changeText","event","currentTarget","value","resizeText","handleMouseDown","document","handleMouseMove","handleMouseUp","removeEventListener","saveMeme","getElementById","length","svg","resetBoxes","fontSize","currentWidth","textLength","baseVal","imageWidth","meme","newHeight","textStyle","fontFamily","textTransform","fill","stroke","userSelect","toggleSelected","el","svgRef","xlinkHref","zIndex","x","y","dominantBaseline","textAnchor","onMouseDown","onMouseUp","placeholder","onChange","uuid","v1","namespace","data","window","localStorage","setItem","store","getItem","parse","getMemes","sessionId","getOrCreateAuthToken","REACT_APP_ASTRA_DB_KEYSPACE","TABLE_NAME","authToken","App","memes","selected","selectedImg","handleImgClick","find","i","target","chooseRandom","floor","random","toggleComponent","params","URLSearchParams","location","search","get","utils","sid","getSessionId","rows","Boolean","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"yGAAAA,EAAOC,QAAU,0vB,wWCWbC,E,yBAXEC,EAAQC,EAAQ,KAChBC,EAAQ,kBAAcC,uCAAd,YAAmDA,WAAnD,wCAYdN,EAAOC,QAAP,uCAAiB,4BAAAM,EAAA,0DACXL,EADW,yCAENA,GAFM,uBAKbM,QAAQC,IAAIJ,GALC,SAMUF,EAAM,GAAD,OAAIE,EAAJ,SAAqB,CAC/CK,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBC,SAvB4BT,UAwB5BU,SAvB4BV,kBAUnB,cAMPW,EANO,gBAgBOA,EAASC,OAhBhB,cAgBbhB,EAhBa,yBAiBNA,GAjBM,wCAmBP,IAAIiB,MAAM,6CAnBH,0DAAjB,sD,6ICZqBC,E,kDACnB,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IAWRC,SAAW,WACT,IAAMC,EAAS,EAAKC,SAASC,QAAQC,aAC/BC,EAAQC,KAAKC,KAAKN,EAAS,GAAK,GACtC,EAAKO,SAAS,CAAEH,WAbhB,EAAKI,MAAQ,CACXJ,MAAO,GAET,EAAKH,SAAWQ,IAAMC,YALL,E,qDAQnB,WACEC,KAAKV,SAASC,QAAQU,iBAAiB,OAAQD,KAAKZ,Y,oBAStD,WAAU,IAAD,OACP,OACE,yBAAKc,MAAO,CAAEC,WAAW,QAAD,OAAUH,KAAKH,MAAMJ,SAC3C,yBACEW,IAAKJ,KAAKV,SACVe,IAAKL,KAAKb,MAAMmB,MAAMC,IACtBC,IAAKR,KAAKb,MAAMmB,MAAMG,KACtBC,GAAIV,KAAKb,MAAMmB,MAAMI,GACrBC,QAAS,SAACC,GAAD,OAAO,EAAKzB,MAAM0B,YAAYD,W,GA3Bdd,IAAMgB,W,2BCKpBC,E,4JACnB,WAAU,IAAD,OACP,OACE,6BACE,yBAAKC,UAAU,MAAf,kBAGG,yBAAKA,UAAU,OAAOX,IAAKY,IAAMT,IAAI,OAAON,MAAO,CAACgB,SAAU,WAAYC,IAAK,GAAIC,MAAO,GAAIC,MAAO,KAAMhC,OAAQ,OAKtH,6BACE,4BAAQ2B,UAAU,cAAcL,QAAS,kBAAM,EAAKxB,MAAMmC,iBAA1D,wBAKF,yBAAKN,UAAU,cACZhB,KAAKb,MAAMoC,OAAOC,KAAI,SAAClB,GACtB,OACE,kBAAC,EAAD,CACEmB,IAAKnB,EAAMI,GACXJ,MAAOA,EACPO,YAAa,EAAK1B,MAAM0B,uB,GAxBHC,a,iCCF/BY,EAAe,CACjBC,QAAS,GACTC,WAAY,GACZC,eAAe,EACfC,kBAAkB,EAClBC,KAAM,MACNC,KAAM,MACNC,QAAS,MACTC,QAAS,OA6MEC,E,kDAzMX,aAAe,IAAD,8BACV,gBAMJC,YAAc,SAACxB,EAAGyB,GACd,IAAIC,EAAO,EAAKhD,SAASiD,wBACnBC,EAAU5B,EAAE6B,QAAUH,EAAKI,KAC3BC,EAAU/B,EAAEgC,QAAUN,EAAKnB,IAC7B0B,EAAW,GAgBf,MAfa,WAATR,EACAQ,EAAW,CACPf,kBAAkB,EAClBD,eAAe,EACfI,QAAQ,GAAD,OAAKO,EAAL,MACPN,QAAQ,GAAD,OAAKS,EAAL,OAEK,QAATN,IACPQ,EAAW,CACPhB,eAAe,EACfC,kBAAkB,EAClBC,KAAK,GAAD,OAAKS,EAAL,MACJR,KAAK,GAAD,OAAKW,EAAL,QAGLE,GA3BG,EA8BdC,WAAa,SAACC,GACV,EAAKnD,SAAL,eACKmD,EAAMC,cAActC,GAAKqC,EAAMC,cAAcC,QAElD,IAAIZ,EAAOU,EAAMC,cAAcvC,KAC/B,EAAKyC,WAAWb,IAnCN,EAsCdc,gBAAkB,SAACvC,EAAGyB,GAClB,IAAMQ,EAAW,EAAKT,YAAYxB,EAAGyB,GACrCe,SAASnD,iBAAiB,aAAa,SAAC8C,GAAD,OACnC,EAAKM,gBAAgBN,EAAOV,MAEhC,EAAKzC,SAAL,eACOiD,KA5CG,EAgDdQ,gBAAkB,SAACzC,EAAGyB,GAClB,GAAI,EAAKxC,MAAMgC,eAAiB,EAAKhC,MAAMiC,iBAAkB,CACzD,IAAIe,EAAW,IACF,WAATR,GAAqB,EAAKxC,MAAMiC,kBAEhB,QAATO,GAAkB,EAAKxC,MAAMgC,iBADpCgB,EAAW,EAAKT,YAAYxB,EAAGyB,IAInC,EAAKzC,SAAL,eACOiD,MAzDD,EA8DdS,cAAgB,SAACP,GACbK,SAASG,oBAAoB,YAAa,EAAKF,iBAC/C,EAAKzD,SAAS,CACViC,eAAe,EACfC,kBAAkB,KAlEZ,EAsEd0B,SAAW,WACP,IAAI/C,EAAO2C,SAASK,eAAe,YAAYR,MAC/CxC,EAAKiD,OAAS,EACVC,eAAiBP,SAASK,eAAe,WAAzC,UAAwDhD,EAAxD,SACAkD,eAAiBP,SAASK,eAAe,WAAY,aA1E/C,EA6EdG,WAAa,WACT,EAAKhE,SAAS,CACV+B,QAAS,GACTC,WAAY,GACZG,KAAM,MACNC,KAAM,MACNC,QAAS,MACTC,QAAS,QAEbkB,SAASK,eAAe,WAAWR,MAAQ,GAC3CG,SAASK,eAAe,cAAcR,MAAQ,GAC9CG,SAASK,eAAe,YAAYR,MAAQ,GAC5CG,SAASK,eAAe,cAAcvD,MAAM2D,SAAW,OACvDT,SAASK,eAAe,mBAAmBvD,MAAM2D,SAAW,QA1FlD,EA6FdX,WAAa,SAACb,GACV,IAAIyB,EAAeV,SAASK,eAAepB,GAAM0B,WAAWC,QAAQf,MAChEgB,EAAa,EAAK9E,MAAM+E,KAAK7C,MAC7ByC,EAAeG,IACfb,SAASK,eAAepB,GAAMnC,MAAM2D,SAApC,UAAmDI,EAAaH,EAAgB,GAAhF,QA/FJ,EAAKjE,MAAL,eACO6B,GAHG,E,0CAqGd,WAAU,IAAD,OACCpB,EAAQN,KAAKb,MAAM+E,KAGrBC,EADW,KADL7D,EAAMe,MAAQf,EAAMjB,QAIxB+E,EAAY,CACdC,WAAY,SACZR,SAAU,OACVS,cAAe,YACfC,KAAM,OACNC,OAAQ,OACRC,WAAY,QAGhB,OACI,6BACI,yBAAKzD,UAAU,KAAKL,QAAS,kBAAM,EAAKxB,MAAMuF,mBAA9C,kBAGA,yBAAK1D,UAAU,gBACX,yBAAKA,UAAU,kBACX,yBACIN,GAAG,UACHN,IAAK,SAACuE,GAAS,EAAKC,OAASD,GAC7BtF,OAAQ8E,EACR9C,MAvBL,KAyBK,2BACIjB,IAAK,SAACuE,GACF,EAAKrF,SAAWqF,GAEpBE,UAAW7E,KAAKb,MAAM+E,KAAK3D,IAC3BlB,OAAQ8E,EACR9C,MA/BT,MAkCK,0BACIX,GAAG,aACHR,MAAK,2BAAOkE,GAAP,IAAkBU,OAAQ9E,KAAKH,MAAMgC,cAAgB,EAAI,IAC9DkD,EAAG/E,KAAKH,MAAMkC,KACdiD,EAAGhF,KAAKH,MAAMmC,KACdiD,iBAAiB,SACjBC,WAAW,SACXC,YAAa,SAACpC,GAAD,OAAW,EAAKI,gBAAgBJ,EAAO,QACpDqC,UAAW,SAACrC,GAAD,OAAW,EAAKO,cAAcP,EAAO,SAE/C/C,KAAKH,MAAM8B,SAGhB,0BACIjB,GAAG,kBACHR,MAAOkE,EACPa,iBAAiB,SACjBC,WAAW,SACXH,EAAG/E,KAAKH,MAAMoC,QACd+C,EAAGhF,KAAKH,MAAMqC,QACdiD,YAAa,SAACpC,GAAD,OAAW,EAAKI,gBAAgBJ,EAAO,WACpDqC,UAAW,SAACrC,GAAD,OAAW,EAAKO,cAAcP,EAAO,YAE/C/C,KAAKH,MAAM+B,aAGpB,yBAAKZ,UAAU,aACX,2BACIA,UAAU,eACVqB,KAAK,OACL5B,KAAK,aACLC,GAAG,UACH2E,YAAY,sBACZC,SAAUtF,KAAK8C,aAGnB,2BACI9B,UAAU,eACVqB,KAAK,OACL5B,KAAK,kBACLC,GAAG,aACH2E,YAAY,yBACZC,SAAUtF,KAAK8C,aAEnB,2BACI9B,UAAU,eACVqB,KAAK,OACL3B,GAAG,WACH2E,YAAY,qBAGpB,yBAAKrE,UAAU,WACX,4BAAQL,QAASX,KAAKwD,SAAUxC,UAAU,mBAA1C,oBACA,4BAAQL,QAASX,KAAK4D,WAAY5C,UAAU,mBAA5C,SACA,4BAAQL,QAAS,kBAAM,EAAKxB,MAAMuF,kBAAkB1D,UAAU,mBAA9D,2B,GAjMNF,a,kBCXP,aAEX,OAAOyE,IAAKC,MAFD,WAOPC,EAAWC,GACf,GAAsB,qBAAXC,OAAwB,CACjC,GAAID,EACF,OAAOE,aAAaC,QAAQJ,EAAW9G,KAAKC,UAAU8G,IAExD,IAAMI,EAAQF,aAAaG,QAAQN,GACnC,OAAQK,GAASnH,KAAKqH,MAAMF,IAAW,KAEzC,OAAO,M,yBChBEG,EAAQ,uCAAG,WAAOC,GAAP,6BAAA7H,EAAA,6DAEhBJ,EAAQC,EAAQ,KAChBiI,EAAuBjI,EAAQ,KAE/BC,EALgB,kBAKMC,uCALN,YAK2CA,WAL3C,wCAMhBgI,EAA8BhI,UAC9BiI,EAAa,QAPG,SASIF,IATJ,uBASfG,EATe,EASfA,UATe,mBAYGrI,EAAM,GAAD,OAAIE,EAAJ,sBAA0BiI,EAA1B,mBAAgEC,EAAhE,SAAmF,CAC7G5H,QAAS,CACP,oBAAqB6H,KAdL,eAYdvH,EAZc,YAiBbJ,KAjBa,UAiBQI,EAASC,OAjBjB,kDAiBRJ,UAjBQ,4EAmBbD,KAAKC,UAAL,OAnBa,0DAAH,sDCGA2H,E,4MACnB1G,MAAQ,CACN0B,OAAQ,GACRiF,MAAO,GACPC,SAAU,KACVC,YAAa,I,EAGfC,eAAiB,SAAC/F,GAChB,EAAKhB,SAAS,CACZ8G,YAAa,EAAK7G,MAAM0B,OAAOqF,MAAK,SAAAC,GAAC,OAAIA,EAAEnG,KAAOE,EAAEkG,OAAOpG,QAE7D,EAAKgE,kB,EAGPqC,aAAe,WACb,EAAKnH,SAAS,CAAE6G,UAAU,EAAMC,YAAa,EAAK7G,MAAM0B,OAAO7B,KAAKsH,MAAMtH,KAAKuH,SAAW,EAAKpH,MAAM0B,OAAOmC,Y,EAG9GwD,gBAAkB,WAChB,OAAI,EAAKrH,MAAM4G,SACN,kBAAC,EAAD,CAASvC,KAAM,EAAKrE,MAAM6G,YAAahC,eAAgB,EAAKA,iBAGjE,kBAAC,EAAD,CACEpD,aAAc,EAAKyF,aACnBxF,OAAQ,EAAK1B,MAAM0B,OACnBV,YAAa,EAAK8F,kB,EA+B1BjC,eAAiB,WACf,EAAK9E,SAAS,CAAE6G,UAAW,EAAK5G,MAAM4G,Y,kDA1BxC,WAEE,IAAMU,EAAS,IAAIC,gBAAgBzB,OAAO0B,SAASC,QACnD,GAAIH,EAAOI,IAAI,cACb,OAAOJ,EAAOI,IAAI,cAIpB,GAAIC,EAAY,cACd,OAAOA,EAAY,cAIrB,IAAMC,EAAMD,IAEZ,OADAA,EAAY,aAAcC,GACnBA,I,oBAGT,WAEE,OAAO,6BACJzH,KAAKkH,qB,+BAQV,WACE,IAAMhB,EAAYlG,KAAK0H,eACjBhC,EAAOO,EAASC,GACtB5H,QAAQC,IAAImH,GACZ1F,KAAKJ,SAAS,CAAE2B,OAAQmE,EAAKiC,W,GAlEA7G,aCMb8G,QACW,cAA7BjC,OAAO0B,SAASQ,UAEe,UAA7BlC,OAAO0B,SAASQ,UAEhBlC,OAAO0B,SAASQ,SAASC,MACvB,2DCZNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEF7E,SAASK,eAAe,SDyHpB,kBAAmByE,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACLnK,QAAQmK,MAAMA,EAAMC,c","file":"static/js/main.2a3999d6.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAB3UlEQVRoge2YPUjDQBiG37RJaE0aK0UHN0fFwVFBwV0oiIM4uYngIoKCglB0EQXRQRRdHF2UqhQXB6WRUgdRrF11VgpWW/9aE4dSIUO05C4W9Xumy/2933tfLtwFIAiCIIhfjFAumF0wKxmQ2cu6Fw2AULi2on5CvBS7x9VofgAyUG3IQLVx1YCcjEGO77gpAdGtiYWHDJSVUQjGO+5bO2HUNbiiwz0DWqQPUkqHujYGz/1tycjGOKSUDi3Sx1uOfwa8N1fQpnosdbIehaxHYYQaecvxz4CpBu3bFPs2p3A3YKh19m0B+zancDOgTYchnx58nQE1CDGdQGC2n5csvz0gXeqQLo4BUbLvc3YIORkDPF5esmwGAvODkPWotbJYsO0vFF5LBeP989T51tmLx4lNxzEwvUK54UUYQeffd1MLIT+0wBICmwFTCyE/suR4fGkB6llCYDMgphPwxdYdj/fvr0I6P2IJ4fcf5pg2cbGlAw8zuxDTCdRszVW8msXmdjwNTKLQ1s0iD4DznbjS+yyPOcp3Yr5nIUmG6VNgKLUw/SrE6xQAoNjUCuE5B08+C+Elz1WSq4HM9p3lubya2eUTnjIW/vcm/g63/yEBfyADZKDakAGCIAiCIBj4APxje+OTYC0+AAAAAElFTkSuQmCC\"","const fetch = require('cross-fetch')\nconst ENDPOINT = `https://${process.env.REACT_APP_ASTRA_DB_ID}-${process.env.REACT_APP_ASTRA_DB_REGION}.apps.astra.datastax.com/api/rest/v1`;\nconst REACT_APP_ASTRA_DB_USERNAME = process.env.REACT_APP_ASTRA_DB_USERNAME;\nconst REACT_APP_ASTRA_DB_PASSWORD = process.env.REACT_APP_ASTRA_DB_PASSWORD;\n\n/*\n * This global variable will persist across requests throughout the life of the lambda.\n * We only need to fetch a token for the first request\n * Lambda creates new containers when the original one expires or if there is high concurrency\n * in which case the new containers will have to fetch their own tokens.\n */\nlet cachedToken;\n\nmodule.exports = async function getOrCreateAuthToken() {\n  if (cachedToken) {\n    return cachedToken;\n  }\n  try {\n    console.log(ENDPOINT)\n    const response = await fetch(`${ENDPOINT}/auth`, {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n      },\n      body: JSON.stringify({\n        username: REACT_APP_ASTRA_DB_USERNAME,\n        password: REACT_APP_ASTRA_DB_PASSWORD,\n      }),\n    });\n    cachedToken = await response.json();\n    return cachedToken;\n  } catch (e) {\n    throw new Error('Could not authenticate with the Astra API');\n  }\n}","import React from \"react\";\nexport default class Image extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      spans: 0,\n    }\n    this.imageRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.imageRef.current.addEventListener('load', this.setSpans)\n  }\n\n  setSpans = () => {\n    const height = this.imageRef.current.clientHeight;\n    const spans = Math.ceil(height / 10 + 2)\n    this.setState({ spans })\n  }\n\n  render() {\n    return (\n      <div style={{ gridRowEnd: `span ${this.state.spans}` }}>\n        <img\n          ref={this.imageRef}\n          src={this.props.image.url}\n          alt={this.props.image.name}\n          id={this.props.image.id}\n          onClick={(e) => this.props.handleclick(e)}\n        />\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport Image from \"./Image\";\nimport \"./ImageList.css\"\nimport logo from './images/canada.png';\n\n\nexport default class Gallery extends Component {\n  render() {\n    return (\n      <div>\n        <div className=\"h1\">\n          MEME GENERATOR \n           </div>\n           <img className=\"icon\" src={logo} alt=\"Logo\" style={{position: 'absolute', top: 10, right: 15, width: '7%', height: 100}}/>\n        \n        \n       \n\n        <div>\n          <button className=\"btn-gallery\" onClick={() => this.props.handleRandom()}>Gimme a Random Meme</button>\n          \n        \n        </div>\n\n        <div className=\"image-list\">\n          {this.props.images.map((image) => {\n            return (\n              <Image\n                key={image.id}\n                image={image}\n                handleclick={this.props.handleclick}\n              />\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport \"./Generator.css\";\nimport * as svg from \"save-svg-as-png\";\n\nconst initialState = {\n    toptext: \"\",\n    bottomtext: \"\",\n    isTopDragging: false,\n    isBottomDragging: false,\n    topX: \"50%\",\n    topY: \"10%\",\n    bottomX: \"50%\",\n    bottomY: \"90%\",\n};\n\nclass TempGen extends Component {\n    constructor() {\n        super();\n        this.state = {\n            ...initialState\n        };\n    }\n\n    getStateObj = (e, type) => {\n        let rect = this.imageRef.getBoundingClientRect();\n        const xOffset = e.clientX - rect.left;\n        const yOffset = e.clientY - rect.top;\n        let stateObj = {};\n        if (type === \"bottom\") {\n            stateObj = {\n                isBottomDragging: true,\n                isTopDragging: false,\n                bottomX: `${xOffset}px`,\n                bottomY: `${yOffset}px`,\n            };\n        } else if (type === \"top\") {\n            stateObj = {\n                isTopDragging: true,\n                isBottomDragging: false,\n                topX: `${xOffset}px`,\n                topY: `${yOffset}px`,\n            };\n        }\n        return stateObj;\n    };\n\n    changeText = (event) => {\n        this.setState({\n            [event.currentTarget.id]: event.currentTarget.value,\n        });\n        let type = event.currentTarget.name\n        this.resizeText(type)\n    };\n\n    handleMouseDown = (e, type) => {\n        const stateObj = this.getStateObj(e, type);\n        document.addEventListener(\"mousemove\", (event) =>\n            this.handleMouseMove(event, type)\n        );\n        this.setState({\n            ...stateObj,\n        });\n    };\n\n    handleMouseMove = (e, type) => {\n        if (this.state.isTopDragging || this.state.isBottomDragging) {\n            let stateObj = {};\n            if (type === \"bottom\" && this.state.isBottomDragging) {\n                stateObj = this.getStateObj(e, type);\n            } else if (type === \"top\" && this.state.isTopDragging) {\n                stateObj = this.getStateObj(e, type);\n            }\n            this.setState({\n                ...stateObj,\n            });\n        }\n    };\n\n    handleMouseUp = (event) => {\n        document.removeEventListener(\"mousemove\", this.handleMouseMove);\n        this.setState({\n            isTopDragging: false,\n            isBottomDragging: false,\n        });\n    };\n\n    saveMeme = () => {\n        let name = document.getElementById(\"memename\").value\n        name.length > 0 ?\n            svg.saveSvgAsPng(document.getElementById(\"svg_ref\"), `${name}.png`) :\n            svg.saveSvgAsPng(document.getElementById(\"svg_ref\"), \"meme.png\")\n    };\n\n    resetBoxes = () => {\n        this.setState({\n            toptext: \"\",\n            bottomtext: \"\",\n            topX: \"50%\",\n            topY: \"10%\",\n            bottomX: \"50%\",\n            bottomY: \"90%\"\n        });\n        document.getElementById(\"toptext\").value = \"\";\n        document.getElementById(\"bottomtext\").value = \"\";\n        document.getElementById(\"memename\").value = \"\";\n        document.getElementById(\"tiptoptext\").style.fontSize = \"50px\"\n        document.getElementById(\"bittybottomtext\").style.fontSize = \"50px\"\n    }\n\n    resizeText = (type) => {\n        let currentWidth = document.getElementById(type).textLength.baseVal.value\n        let imageWidth = this.props.meme.width\n        if (currentWidth > imageWidth) {\n            document.getElementById(type).style.fontSize = `${(imageWidth / currentWidth) * 40}px`;\n        }\n    }\n\n    render() {\n        const image = this.props.meme;\n        var wrh = image.width / image.height;\n        var newWidth = 500;\n        var newHeight = newWidth / wrh;\n\n        const textStyle = {\n            fontFamily: \"Impact\",\n            fontSize: \"50px\",\n            textTransform: \"uppercase\",\n            fill: \"#FFF\",\n            stroke: \"#000\",\n            userSelect: \"none\"\n        };\n\n        return (\n            <div>\n                <div className=\"h1\" onClick={() => this.props.toggleSelected()}>\n                    MEME GENERATOR\n                </div>\n                <div className=\"main-content\">\n                    <div className=\"meme-gen-modal\">\n                        <svg\n                            id=\"svg_ref\"\n                            ref={(el) => { this.svgRef = el; }}\n                            height={newHeight}\n                            width={newWidth}\n                        >\n                            <image\n                                ref={(el) => {\n                                    this.imageRef = el;\n                                }}\n                                xlinkHref={this.props.meme.url}\n                                height={newHeight}\n                                width={newWidth}\n                            />\n\n                            <text\n                                id=\"tiptoptext\"\n                                style={{ ...textStyle, zIndex: this.state.isTopDragging ? 4 : 1 }}\n                                x={this.state.topX}\n                                y={this.state.topY}\n                                dominantBaseline=\"middle\"\n                                textAnchor=\"middle\"\n                                onMouseDown={(event) => this.handleMouseDown(event, \"top\")}\n                                onMouseUp={(event) => this.handleMouseUp(event, \"top\")}\n                            >\n                                {this.state.toptext}\n                            </text>\n\n                            <text\n                                id=\"bittybottomtext\"\n                                style={textStyle}\n                                dominantBaseline=\"middle\"\n                                textAnchor=\"middle\"\n                                x={this.state.bottomX}\n                                y={this.state.bottomY}\n                                onMouseDown={(event) => this.handleMouseDown(event, \"bottom\")}\n                                onMouseUp={(event) => this.handleMouseUp(event, \"bottom\")}\n                            >\n                                {this.state.bottomtext}\n                            </text>\n                        </svg>\n                        <div className=\"meme-form\">\n                            <input\n                                className=\"form-control\"\n                                type=\"text\"\n                                name=\"tiptoptext\"\n                                id=\"toptext\"\n                                placeholder=\"Add text to the top\"\n                                onChange={this.changeText}\n                            />\n\n                            <input\n                                className=\"form-control\"\n                                type=\"text\"\n                                name=\"bittybottomtext\"\n                                id=\"bottomtext\"\n                                placeholder=\"Add text to the bottom\"\n                                onChange={this.changeText}\n                            />\n                            <input\n                                className=\"form-control\"\n                                type=\"text\"\n                                id=\"memename\"\n                                placeholder=\"Save meme as...\"\n                            />\n                        </div>\n                        <div className=\"buttons\">\n                            <button onClick={this.saveMeme} className=\"btn btn-primary\">Download Meme :D</button>\n                            <button onClick={this.resetBoxes} className=\"btn btn-primary\">Reset</button>\n                            <button onClick={() => this.props.toggleSelected()} className=\"btn btn-primary\">Back to Gallery</button>\n                        </div>\n                    </div>\n                </div >\n            </div>\n        );\n    }\n}\n\nexport default TempGen;\n","/* global localStorage */\n\nimport uuid from 'node-uuid'\n\nexport default {\n  uuid() {\n    return uuid.v1()\n  },\n  pluralize(count, word) {\n    return count === 1 ? word : `${word}s`;\n  },\n  store(namespace, data) {\n    if (typeof window !== 'undefined') {\n      if (data) {\n        return localStorage.setItem(namespace, JSON.stringify(data));\n      }\n      const store = localStorage.getItem(namespace);\n      return (store && JSON.parse(store)) || null;\n    }\n    return null;\n  },\n};\n","import utils from './utils';\n//import {getOrCreateAuthToken} from './getOrCreateAuthToken';\n\nexport const getMemes = async (sessionId) => {\n\n  const fetch = require('cross-fetch');\n  const getOrCreateAuthToken = require('./getOrCreateAuthToken');\n\n  const ENDPOINT = `https://${process.env.REACT_APP_ASTRA_DB_ID}-${process.env.REACT_APP_ASTRA_DB_REGION}.apps.astra.datastax.com/api/rest/v1`;\n  const REACT_APP_ASTRA_DB_KEYSPACE = process.env.REACT_APP_ASTRA_DB_KEYSPACE;\n  const TABLE_NAME = 'memes';\n  //const {path} = event;\n  const {authToken} = await getOrCreateAuthToken();\n\n  try {\n    const response = await fetch(`${ENDPOINT}/keyspaces/${REACT_APP_ASTRA_DB_KEYSPACE}/tables/${TABLE_NAME}/rows`, {\n      headers: {\n        'x-cassandra-token': authToken\n      }\n    });\n    return JSON.stringify(await response.json());\n  } catch (e) {\n    return JSON.stringify(e);\n  }\n};\n\nexport const deleteMemes = async (sessionId) => {\n  const response = await fetch('/api/deleteMemes', {\n    body: JSON.stringify({sessionId}),\n    method: 'POST'\n  })\n  return response.json();\n};\n\nexport const createMeme = async (meme, sessionId) => {\n  if (!meme.id) {\n    meme.id = utils.uuid();\n  }\n  meme['session_id'] = sessionId;\n\n  const columns = {\n    columns: Object.keys(meme).map(key => {\n      return {\n        name: key,\n        value: meme[key]\n      };\n    })\n  };\n  const response = await fetch('/api/createMeme', {\n    body: JSON.stringify(columns),\n    method: 'POST'\n  })\n  return response.json();\n};","import React, { Component } from \"react\";\nimport Gallery from \"./Gallery\";\nimport TempGen from \"./TempGen\";\nimport utils from './utils/utils';\nimport {getMemes} from './utils/api';\n\nexport default class App extends Component {\n  state = {\n    images: [],\n    memes: [],\n    selected: null,\n    selectedImg: [],\n  };\n\n  handleImgClick = (e) => {\n    this.setState({\n      selectedImg: this.state.images.find(i => i.id === e.target.id),\n    });\n    this.toggleSelected()\n  };\n\n  chooseRandom = () => {\n    this.setState({ selected: true, selectedImg: this.state.images[Math.floor(Math.random() * this.state.images.length)] })\n  }\n\n  toggleComponent = () => {\n    if (this.state.selected) {\n      return <TempGen meme={this.state.selectedImg} toggleSelected={this.toggleSelected} />;\n    } else {\n      return (\n        <Gallery\n          handleRandom={this.chooseRandom}\n          images={this.state.images}\n          handleclick={this.handleImgClick}\n        />\n      );\n    }\n  };\n\n  getSessionId() {\n    // Check if a session id query parameter exists\n    const params = new URLSearchParams(window.location.search);\n    if (params.get('session-id')) {\n      return params.get('session-id');\n    }\n\n    // Check if a session id is stored to local storage\n    if (utils.store('session-id')) {\n      return utils.store('session-id');\n    }\n\n    // Otherwise, generate a new session id\n    const sid = utils.uuid();\n    utils.store('session-id', sid);\n    return sid;\n  }\n\n  render() {\n    \n    return <div>\n      {this.toggleComponent()}\n    </div>;\n  }\n\n  toggleSelected = () => {\n    this.setState({ selected: !this.state.selected })\n  }\n\n  componentDidMount() {\n    const sessionId = this.getSessionId();\n    const data = getMemes(sessionId);\n    console.log(data);\n    this.setState({ images: data.rows });\n  }\n  \n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}